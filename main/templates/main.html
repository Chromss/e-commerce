{% load static %}
{% block head %}
<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Archivo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="icon" href="{% static 'favicon.png' %}" type="image/png">
    <title>Welcome to HomifyInc!</title>

    <style>
        body, html {
            height: 100%;
            margin: 0;
            font-family: 'Archivo', sans-serif;
            overflow-x: hidden;
            overflow-y: auto;
            scrollbar-width: none;
        }

        .navbar {
            position: absolute;
            width: 100vw;
            height: 75px;
        }

        .toppanel {
            width: 320px;
            height: 100vh;
            z-index: 3;
            left: -320px;
            background-color: #FFFFFF;
            position: fixed;
            transition: left 0.4s;
            overflow-x: hidden;
            overflow-y: auto;
            scrollbar-width: none;
        }

        .imgprofile {
            margin-left: 80px;
            position: relative;
            display: none;
            cursor: pointer;
            transform: scale(2.5);
            transition: transform 0.2s;
            top: -10px;
        }

        .imgprofile:hover {
            transform: scale(2.7);
        }

        .userinfo {
            display: none;
            position: absolute;
            right: calc(105px);
            top: 20px;
            background-color: #E6E6E6;
            border-radius: 8px;
            border: 1px solid #B2B2B2;
            z-index: 1;
            opacity: 0;
            transition: opacity 0.2s ease;
        }

        .userinfo-frame {
            margin: 10px;
        }

        .userinfo-title {
            font-weight: 600;
            letter-spacing: -0.5px;
            font-size: 16px;
        }

        .userinfo-text {
            margin-top: 2px;
            letter-spacing: -0.5px;
            font-size: 14px;
        }

        .userinfo-logout {
            margin-top: 2px;
            letter-spacing: -0.5px;
            font-size: 14px;
            width: 40px;
            cursor: pointer;
            text-decoration: underline;
        }

        .mainrectangle {
            width: 100vw;
            height: 250px;
            top: 75px;
            background-color: #ADD8E6;
            position: absolute;
            justify-content: center;
            align-items: center;
            display: flex;
            flex-direction: column;
        }

        .sidebar {
            width: 23px;
            height: 4px;
            border-radius: 4px;
            left: 28px;
            opacity: 0.4;
            background-color: #616161;
            position: absolute;
        }

        .shadowsidebar {
            background-color: #616161;
            position: relative;
            cursor: pointer;
            width: 34px;
            height: 34px;
            border-radius: 4px;
            top: 30px;
            left: 23px;
            opacity: 0;
            z-index: 1;
            transition: opacity 0.3s;
        }

        .shadowsidebar:hover {
            opacity: 0.1;
        }

        .rectangle1 {
            top: 37px;
        }

        .rectangle2 {
            top: 45px;
        }

        .rectangle3 {
            top: 53px;
        }

        .textlogo {
            font-size: 30px;
            font-weight: 700;
            letter-spacing: -1px;
            top: 30px;
            font-style: normal;
            white-space: nowrap;
            position: absolute;
        }

        .textlogo1 {
            left: 80px;
        }

        .textlogo2 {
            left: 19px;
        }

        .textintro {
            font-size: 14px;
            font-weight: 500;
            position: absolute;
            letter-spacing: -0.5px;
            top: 65px;
            left: 20px;
        }

        .navbarframe {
            display: flex;
            position: absolute;
            top: 40px;
            right: calc(60px);
            height: 20px;
        }

        .textmenu {
            font-size: 18px;
            margin-left: 60px;
            font-weight: 600;
            letter-spacing: -0.5px;
            cursor: pointer;
            transition: color 0.15s;
        }

        .textmenu:hover {
            color: #FFA500;
        }

        .texthome, .textproduct, .textabout {
            position: relative;
        }

        .textlogin {
            display: block;
            text-decoration: underline;
            position: relative;    
        }

        .innertext {
            text-wrap: nowrap;
            font-style: normal;
            position: relative;
            cursor: pointer;
            font-size: 22px;
            font-weight: 700;
            letter-spacing: -0.5px;
            transform: scale(1);
            transition: color 0.2s, transform 0.2s;
        }

        .innertext:hover {
            color: #FFA500;
            transform: scale(1.1);;
        }

        .innerimg {
            display: none;
            width: 120px;
            height: 120px;
            object-fit: cover;
            margin-bottom: 16px;
        }

        .tpframe {
            position: absolute;
            overflow: hidden;
            left: 40px;
            top: 142px;
            width: 260px;
            height: 0px;
            transition: height 0.5s ease;
        }

        .tpimage {
            position: absolute;
            object-fit: cover;
            cursor: pointer;
            width: 12px;
            height: 12px;
            left: 20px;
            top: 128px;
            transform: rotate(90deg);
            transition: transform 0.15s ease;
        }

        .texttoppanel {
            position: absolute;
            font-size: 22;
            left: 40px;
            letter-spacing: -0.5px;
            cursor: pointer;
            transition: color 0.15s;
        }

        .texttoppanel:hover {
            color: #FFA500;
        }

        .ttp1 {
            top: 100px;
        }

        .ttp2 {
            top: 125px;
        }

        .plist {
            position: relative;
            cursor: pointer;
            white-space: nowrap;
            margin: 8px;
            font-size: 22;
            font-weight: 600;
            letter-spacing: -0.5px;
            transition: color 0.15s;
        }

        .plist:hover {
            color: #FFA500;
        }

        .maincontent {
            position: absolute;
            top: 400px;
            left: 80px;
        }

        .framecontent {
            align-items: center;
            display: flex;
            position: relative;
            width: 900px;
        }

        .titletext {
            display: none;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            background-color: #FFD26D;
            padding-top: 8px;
            padding-bottom: 8px;
            font-weight: 700;
            font-size: 32px;
        }

        .imgcontent {
            width: 160px;
            height: 160px;
            object-fit: cover;
            margin: 48px;
        }

        .overlay {
            width: 100vw;
            height: 100vh;
            background-color: rgba(0, 0, 0, 0.5);
            opacity: 0;
            position: fixed;
            pointer-events: none;
            transition: opacity 0.4s;
            z-index: 2;
        }

        .overlay.active {
            opacity: 1;
            pointer-events: auto;
        }

        @media (max-width: 767.5px) {
            .texthome, .textproduct, .textabout {
                display: none;
            }

            .navbarframe {
                right: 100px;
            }

            .userinfo {
                right: 145px;
            }

            .for-mobile {
                position: absolute;
                width: 34px;
                height: 34px;
                right: 25px;
            }

            .sidebar-mobile {
                width: 23px;
                height: 4px;
                border-radius: 4px;
                opacity: 0.4;
                background-color: #616161;
                position: absolute;
            }

            .shadowsidebar-mobile {
                background-color: #616161;
                position: relative;
                cursor: pointer;
                width: 34px;
                height: 34px;
                border-radius: 4px;
                top: 30px;
                right: 6px;
                opacity: 0;
                z-index: 1;
                transition: opacity 0.3s;
            }

            .shadowsidebar-mobile:hover {
                opacity: 0.1;
            }

            .rectangle1-mobile {
                top: 37px;
            }

            .rectangle2-mobile {
                top: 45px;
            }

            .rectangle3-mobile {
                top: 53px;
            }

            .showmenu {
                display: none;
                background-color: #FAFAFA;
                position: absolute;
                opacity: 0.7;
                border-radius: 8px;
                width: 120px;
                height: 90px;
                top: 70px;
                right: 5px;
            }

            .textmenu-mobile {
                text-decoration: underline;
                font-size: 16px;
                margin-bottom: 8px;
                font-weight: 600;
                letter-spacing: -0.5px;
                top: 10px;
                left: 15px;
                cursor: pointer;
                position: relative;
                transition: color 0.15s;
            }
        }

        @media (max-width: 379.5px) {
            .navbarframe {
                right: 70px;
            }

            .shadowsidebar-mobile {
                right: -10px;
            }

            .sidebar-mobile {
                right: -5px;
            }

            .textlogo {
                left: 20px;
            }

            .sidebar {
                left: 15px;
            }

            .shadowsidebar {
                left: 10px;
            }
        }
    </style>
</head>
{% endblock head %}

{% block content %}
<body>
    <div class="mainrectangle">
        <img class="innerimg" src="{% static 'thinking.png' %}" id="innerimg">
        <div class="innertext" id="innertext">Looking for perfect goods?</div>
    </div>
    <div class="toppanel">
        <div class="textlogo textlogo2">Welcome, {{ user.username|default:"None" }}!</div>
        <div class="textintro">Last Login: {{ last_login }}</div>
        <div class="texttoppanel ttp1" id="add-inventory">Add Inventory</div>
        <div class="texttoppanel ttp2" id="edit-inventory">Edit Inventory</div>
        <img class="tpimage" id="tpimage" src="{% static 'expand.png' %}">
        <div class="tpframe" id="tpframe">
            {% for product in products %}
                <div class="plist" product-id="{{ product.id }}">{{ product.name }}</div>
            {% endfor %}
        </div>
    </div>
    <div class="maincontent" id="content">
        <div class="titletext" id="title1"></div>
        <div class="framecontent">
            <img class="imgcontent" src="{% static 'home1.png' %}">
            <p style="word-spacing: 1px; line-height: 130%;">
                Welcome to HomifyInc, 
                <strong>Your Premier Home Essentials Provider</strong>! 
                Explore our vast selection of curated home products with ease and excitement. 
                Whether you're redecorating or stocking up, our intuitive platform empowers you to discover related essentials effortlessly. 
                Enjoy the freedom to mix, match, and find unique solutions that elevate your space. 
                At HomifyInc, your journey to a beautifully furnished home is just a click away!
            </p>
        </div>
        <div class="titletext" id="title2" style="margin-top: 40px; margin-left: 770px;"></div>
        <div class="framecontent" style="margin-left: auto;">
            <p style="word-spacing: 1px; line-height: 130%; text-align: right;">
                At HomifyInc, you have the power to bring your ideas to life! 
                <strong>Effortlessly add and customize products</strong> to reflect your unique style and vision. 
                Whether it’s trendy home essentials or one-of-a-kind treasures, our platform allows you to showcase your offerings with personalized touches that grab attention. 
                With just a few clicks, you can make your products stand out and attract the right buyers. Yes, few clicks!
            </p>
            <img class="imgcontent" src="{% static 'home2.png' %}">
        </div>
        <div class="titletext" id="title3" style="margin-top: 40px;"></div>
        <div class="framecontent">
            <img class="imgcontent" src="{% static 'home3.png' %}">
            <p style="word-spacing: 1px; line-height: 130%;">
                Your journey to a world of possibilities begins with a simple step—sign up and log in! 
                <strong>Unlock exclusive features designed</strong> to enhance your shopping experience, from personalized recommendations to 
                special offers tailored just for you. Don’t miss out on the full potential of HomifyInc—register today and 
                discover a vibrant community where your ideas can flourish. The gateway to more awaits, and it’s just a click away!
            </p>
        </div>
    </div>
    <div class="navbar">
        <div class="for-mobile">
            <div class="showmenu">
                <div class="textmenu-mobile">Home</div>
                <div class="textmenu-mobile" id="productmob">Product</div>
                <div class="textmenu-mobile" id="about">About</div>
            </div>
            <div class="shadowsidebar-mobile" id="ssbmobile"></div>
            <div class="sidebar-mobile rectangle1-mobile"></div>
            <div class="sidebar-mobile rectangle2-mobile"></div>
            <div class="sidebar-mobile rectangle3-mobile"></div>
        </div>
        <div class="shadowsidebar"></div>
        <div class="sidebar rectangle1"></div>
        <div class="sidebar rectangle2"></div>
        <div class="sidebar rectangle3"></div>
        <div class="textlogo textlogo1">HomifyInc</div>
        <div class="navbarframe">
            <div class="textmenu texthome">Home</div>
            <div class="textmenu textproduct" id="product">Product</div>
            <div class="textmenu textabout" id="about">About</div>
            <div class="textmenu textlogin" id="tologin">Login</div>
            <img src="{% static 'profile.png' %}" class="imgprofile" id="imgprofile">
        </div>
    </div>
    <div class="userinfo" id="user">
        <div class="userinfo-frame" id="userinfo">
            <div class="userinfo-text">{{ user.username }}</div>
            <div class="userinfo-logout" id="logout">Logout</div>
        </div>
    </div>
    <input type="hidden" name="is_logged_in" id="loggedin" value="{{ user.is_authenticated }}">
    <div class="overlay" id="overlay"></div>

    <script>
        let isLoggedIn = document.getElementById('loggedin').value === 'True';
        let isVisible = false;
        let isMenuVis = false;
        let isInnerDown = false;
        let isExpanded = false;

        const overlay = document.getElementById('overlay');
        const shadowsidebar = document.querySelector('.shadowsidebar');
        const showMenu = document.querySelector('.showmenu');
        const ssbMobile = document.getElementById('ssbmobile')
        const toppanel = document.querySelector('.toppanel');
        const tpImage = document.getElementById('tpimage');
        const tpFrame = document.getElementById('tpframe');
        const pList = document.querySelectorAll('.plist');
        const addinventory = document.getElementById('add-inventory');
        const editInventory = document.getElementById('edit-inventory');
        const toProduct = document.getElementById('product');
        const toProductM = document.getElementById('productmob');
        const toLogin = document.getElementById('tologin');
        const userInfo = document.getElementById('userinfo');
        const showUser = document.getElementById('user');
        const imageIcon = document.getElementById('imgprofile');
        const about = document.getElementById('about');
        const content = document.getElementById('content');
        const innerText = document.getElementById('innertext');
        const innerImg = document.getElementById('innerimg');
        const logout = document.getElementById('logout');
        const title1 = document.getElementById('title1');
        const title2 = document.getElementById('title2');
        const title3 = document.getElementById('title3');

        if (!isLoggedIn) {
            toLogin.style.display = 'block';
            imageIcon.style.display = 'none';
        } else {
            toLogin.style.display = 'none';
            imageIcon.style.display = 'block';
        }

        function checkViewport() {
            if (window.innerWidth < 768) {
                document.querySelector('.for-mobile').style.display = 'block';
            } else {
                document.querySelector('.for-mobile').style.display = 'none';
            }
        }

        function dynamicContent() {
            const width = window.innerWidth;
            const fixWidth = screen.width;
            if (width < fixWidth) {
                const mcAfter = 1370 - (fixWidth - width);
                content.style.width = mcAfter + 'px';
            } else {
                content.style.width = '1370px';
            }
        }

        function titleAnimation(element, text) {
            element.style.width = '0';
            element.style.paddingLeft = '0';
            element.style.paddingRight = '0';
            element.textContent = text;
            element.style.display = 'block';

            element.getBoundingClientRect();
            element.style.transition = 'width 0.5s ease, padding 0.00001s ease';
            element.style.paddingLeft = '24px';
            element.style.paddingRight = '24px';
            const fullWidth = element.scrollWidth + 'px';
            element.style.width = fullWidth;
        }

        function expandProduct() {
            if (!isExpanded) {
                tpImage.style.transform = 'rotate(180deg)';
                tpFrame.style.height = '0';
                const fullH = tpFrame.scrollHeight + 'px';
                tpFrame.style.height = fullH;
                isExpanded = true;
            } else {
                tpImage.style.transform = 'rotate(90deg)'
                tpFrame.style.height = '0';
                isExpanded = false;
            }
        }

        window.addEventListener('DOMContentLoaded', () => {
            titleAnimation(title1, "Your Premier Home Essentials Provider");
            titleAnimation(title2, "Tailor Your Offerings, Gain Attention!");
            titleAnimation(title3, "Your Gateway to More Awaits!");
        });

        checkViewport();
        dynamicContent();
        window.addEventListener('resize', checkViewport);
        window.addEventListener('resize', dynamicContent);
        tpImage.addEventListener('click', expandProduct);
        editInventory.addEventListener('click', expandProduct);

        pList.forEach(function(p) {
            p.addEventListener('click', function(event) {
                const productId = event.target.getAttribute('product-id');
                if (productId) {
                    window.location.href = `/edit-inventory/${productId}`;
                }
            });
        });

        innerText.addEventListener('click', function() {
            if (!isInnerDown) {
                isInnerDown = true;
                innerImg.style.display = 'block';
            } else {
                isInnerDown = false;
                innerImg.style.display = 'none';
            }
        });

        showMenu.addEventListener('click', function(event) {
            event.stopPropagation();
        });

        ssbMobile.addEventListener('click', function(event) {
            if (!isMenuVis) {
                isMenuVis = true;
                showMenu.style.display = 'block';
            } else {
                isMenuVis = false;
                showMenu.style.display = 'none';
            }
            event.stopPropagation();
        });

        document.addEventListener('click', function() {
            if (isMenuVis) {
                isMenuVis = false;
                showMenu.style.display = 'none';
            }
        });

        imageIcon.addEventListener('mouseover', function() {
            showUser.style.display = 'block';
            setTimeout(() => {showUser.style.opacity = '1';}, 0);
        });
        
        imageIcon.addEventListener('mouseout', function() {
            if (!isVisible) {
                showUser.style.opacity = '0';
                setTimeout(() => {showUser.style.display = 'none';}, 200);
            }
        });

        imageIcon.addEventListener('click', function() {
            if (!isVisible) {
                isVisible = true;
                about.style.cursor = 'default';
            } else {
                isVisible = false;
                about.style.cursor = 'pointer';
            }
        });

        overlay.addEventListener('click', () => {
            overlay.classList.remove('active');
            toppanel.style.left = '-320px';
        });

        shadowsidebar.addEventListener('click', function() {
            showUser.style.opacity = '0';
            setTimeout(() => {showUser.style.display = 'none';}, 200);
            about.style.cursor = 'pointer';
            isVisible = false;

            if (overlay.classList.contains('active')) {
                overlay.classList.remove('active');
                toppanel.style.left = '-320px';
            } else {
                overlay.classList.add('active');
                toppanel.style.left = '0';
            }
        });

        addinventory.addEventListener('click', () => {
            if (!isLoggedIn) alert("Unable to access this menu due to not logged in.")
            else window.location.href = '{% url "main:show_add_inventory" %}';
        });

        toProduct.addEventListener('click', () => {
            if (!isLoggedIn) alert("Unable to access this menu due to not logged in.")
            else window.location.href = '{% url "main:show_product" %}';
        });

        toProductM.addEventListener('click', () => {
            if (!isLoggedIn) alert("Unable to access this menu due to not logged in.")
            else window.location.href = '{% url "main:show_product" %}';
        });

        toLogin.addEventListener('click', () => {
            window.location.href = '{% url "main:show_login" %}';
        });

        logout.addEventListener('click', () => {
            document.getElementById('loggedin').value = "False";
            window.location.href = '{% url "main:do_logout" %}';
        });
    </script>
</body>
</html>
{% endblock content %}